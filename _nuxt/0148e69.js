(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{839:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(4),o=function(t,e,n){r.a.prototype.$swal({position:"top-end",title:t,icon:e,timer:n,showConfirmButton:!1,toast:!0})}},840:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(702),o=n.n(r);o.a.locale("vi");var l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dddd DD/MM/YYYY, HH:mm:ss";return o()(t).format(e)}},842:function(t,e,n){var map={"./af":704,"./af.js":704,"./ar":705,"./ar-dz":706,"./ar-dz.js":706,"./ar-kw":707,"./ar-kw.js":707,"./ar-ly":708,"./ar-ly.js":708,"./ar-ma":709,"./ar-ma.js":709,"./ar-sa":710,"./ar-sa.js":710,"./ar-tn":711,"./ar-tn.js":711,"./ar.js":705,"./az":712,"./az.js":712,"./be":713,"./be.js":713,"./bg":714,"./bg.js":714,"./bm":715,"./bm.js":715,"./bn":716,"./bn-bd":717,"./bn-bd.js":717,"./bn.js":716,"./bo":718,"./bo.js":718,"./br":719,"./br.js":719,"./bs":720,"./bs.js":720,"./ca":721,"./ca.js":721,"./cs":722,"./cs.js":722,"./cv":723,"./cv.js":723,"./cy":724,"./cy.js":724,"./da":725,"./da.js":725,"./de":726,"./de-at":727,"./de-at.js":727,"./de-ch":728,"./de-ch.js":728,"./de.js":726,"./dv":729,"./dv.js":729,"./el":730,"./el.js":730,"./en-au":731,"./en-au.js":731,"./en-ca":732,"./en-ca.js":732,"./en-gb":733,"./en-gb.js":733,"./en-ie":734,"./en-ie.js":734,"./en-il":735,"./en-il.js":735,"./en-in":736,"./en-in.js":736,"./en-nz":737,"./en-nz.js":737,"./en-sg":738,"./en-sg.js":738,"./eo":739,"./eo.js":739,"./es":740,"./es-do":741,"./es-do.js":741,"./es-mx":742,"./es-mx.js":742,"./es-us":743,"./es-us.js":743,"./es.js":740,"./et":744,"./et.js":744,"./eu":745,"./eu.js":745,"./fa":746,"./fa.js":746,"./fi":747,"./fi.js":747,"./fil":748,"./fil.js":748,"./fo":749,"./fo.js":749,"./fr":750,"./fr-ca":751,"./fr-ca.js":751,"./fr-ch":752,"./fr-ch.js":752,"./fr.js":750,"./fy":753,"./fy.js":753,"./ga":754,"./ga.js":754,"./gd":755,"./gd.js":755,"./gl":756,"./gl.js":756,"./gom-deva":757,"./gom-deva.js":757,"./gom-latn":758,"./gom-latn.js":758,"./gu":759,"./gu.js":759,"./he":760,"./he.js":760,"./hi":761,"./hi.js":761,"./hr":762,"./hr.js":762,"./hu":763,"./hu.js":763,"./hy-am":764,"./hy-am.js":764,"./id":765,"./id.js":765,"./is":766,"./is.js":766,"./it":767,"./it-ch":768,"./it-ch.js":768,"./it.js":767,"./ja":769,"./ja.js":769,"./jv":770,"./jv.js":770,"./ka":771,"./ka.js":771,"./kk":772,"./kk.js":772,"./km":773,"./km.js":773,"./kn":774,"./kn.js":774,"./ko":775,"./ko.js":775,"./ku":776,"./ku.js":776,"./ky":777,"./ky.js":777,"./lb":778,"./lb.js":778,"./lo":779,"./lo.js":779,"./lt":780,"./lt.js":780,"./lv":781,"./lv.js":781,"./me":782,"./me.js":782,"./mi":783,"./mi.js":783,"./mk":784,"./mk.js":784,"./ml":785,"./ml.js":785,"./mn":786,"./mn.js":786,"./mr":787,"./mr.js":787,"./ms":788,"./ms-my":789,"./ms-my.js":789,"./ms.js":788,"./mt":790,"./mt.js":790,"./my":791,"./my.js":791,"./nb":792,"./nb.js":792,"./ne":793,"./ne.js":793,"./nl":794,"./nl-be":795,"./nl-be.js":795,"./nl.js":794,"./nn":796,"./nn.js":796,"./oc-lnc":797,"./oc-lnc.js":797,"./pa-in":798,"./pa-in.js":798,"./pl":799,"./pl.js":799,"./pt":800,"./pt-br":801,"./pt-br.js":801,"./pt.js":800,"./ro":802,"./ro.js":802,"./ru":803,"./ru.js":803,"./sd":804,"./sd.js":804,"./se":805,"./se.js":805,"./si":806,"./si.js":806,"./sk":807,"./sk.js":807,"./sl":808,"./sl.js":808,"./sq":809,"./sq.js":809,"./sr":810,"./sr-cyrl":811,"./sr-cyrl.js":811,"./sr.js":810,"./ss":812,"./ss.js":812,"./sv":813,"./sv.js":813,"./sw":814,"./sw.js":814,"./ta":815,"./ta.js":815,"./te":816,"./te.js":816,"./tet":817,"./tet.js":817,"./tg":818,"./tg.js":818,"./th":819,"./th.js":819,"./tk":820,"./tk.js":820,"./tl-ph":821,"./tl-ph.js":821,"./tlh":822,"./tlh.js":822,"./tr":823,"./tr.js":823,"./tzl":824,"./tzl.js":824,"./tzm":825,"./tzm-latn":826,"./tzm-latn.js":826,"./tzm.js":825,"./ug-cn":827,"./ug-cn.js":827,"./uk":828,"./uk.js":828,"./ur":829,"./ur.js":829,"./uz":830,"./uz-latn":831,"./uz-latn.js":831,"./uz.js":830,"./vi":832,"./vi.js":832,"./x-pseudo":833,"./x-pseudo.js":833,"./yo":834,"./yo.js":834,"./zh-cn":835,"./zh-cn.js":835,"./zh-hk":836,"./zh-hk.js":836,"./zh-mo":837,"./zh-mo.js":837,"./zh-tw":838,"./zh-tw.js":838};function r(t){var e=o(t);return n(e)}function o(t){if(!n.o(map,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return map[t]}r.keys=function(){return Object.keys(map)},r.resolve=o,t.exports=r,r.id=842},921:function(t,e,n){"use strict";n.r(e);n(28),n(77),n(78),n(163),n(412),n(43);var r=n(17),o=n(840),l=n(839),c={layout:"admin",data:function(){var t=this;return{btnPassword:!1,showInfo:!0,displayName:"",visibleModal:!1,disableBtnSubmit:!0,btnLoading:!1,seclectedFile:"",imageUrl:"",form:{password:"",oldPassword:"",confirm:""},rules:{oldPassword:{required:!0,message:this.$t("Vui lòng nhập mật khẩu cũ!")},password:{required:!0,message:this.$t("Vui lòng nhập mật khẩu")},confirm:[{validator:function(e,n,r){n!==t.form.password?r(new Error(t.$t("Mật khẩu không trùng khớp!"))):r()},trigger:"change"},{required:!0,message:this.$t("Vui lòng nhập lại mật khẩu!")}]}}},head:function(){return{title:this.$t("Trang cá nhân")+" | Thanh Thúy"}},methods:{formatDate:function(t){return Object(o.a)(parseInt(t))},openModalAvatar:function(){this.visibleModal=!0},cancelModal:function(){var t=this;setTimeout((function(){t.imageUrl=""}),200),this.visibleModal=!1,this.disableBtnSubmit=!0},dummyRequest:function(t){setTimeout((function(){t.onSuccess("ok")}),0)},handleChooseAvt:function(t){"done"===t.file.status&&(this.disableBtnSubmit=!1,this.seclectedFile=t.file.originFileObj,this.imageUrl=URL.createObjectURL(t.file.originFileObj))},onSubmit:function(){var t=this,e=this.$fire.auth.currentUser;this.btnLoading=!0,this.$fire.storage.ref("user/avatar-"+e.uid).put(this.seclectedFile).then((function(n){n.ref.getDownloadURL().then((function(n){e.updateProfile({photoURL:n}).then((function(e){t.cancelModal(),t.$store.dispatch("fetchUser"),t.btnLoading=!1,Object(l.a)(t.$t("Thay đổi thành công"),"success","2000")})).catch((function(){t.btnLoading=!1,Object(l.a)(t.$t("Thay đổi thất bại, Vui lòng thử lại sau"),"error","3000")}))}))}))},handleEdit:function(){this.showInfo=!1,this.displayName=this.$store.state.user.displayName,this.phoneNumber=this.$store.state.user.phoneNumber},handleCancel:function(){this.showInfo=!0,this.displayName="",this.phoneNumber=""},onSave:function(){var t=this;this.btnLoading=!0,this.$fire.auth.currentUser.updateProfile({displayName:this.displayName}).then((function(e){t.handleCancel(),t.$store.dispatch("fetchUser"),t.btnLoading=!1,Object(l.a)(t.$t("Thay đổi thành công"),"success","2000")})).catch((function(){t.btnLoading=!1,Object(l.a)(t.$t("Thay đổi thất bại, Vui lòng thử lại sau"),"error","3000")}))},validateForm:function(){var t=this;this.$refs.ruleForm.validate((function(e){e&&t.onChangePass()}))},onChangePass:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.btnPassword=!0,n=t.$fire.auth.currentUser,e.next=4,t.$fireModule.auth.EmailAuthProvider.credential(n.email,t.form.oldPassword);case 4:r=e.sent,n.reauthenticateWithCredential(r).then((function(e){n.updatePassword(t.form.password).then((function(){Object(l.a)(t.$t("Thay đổi thành công"),"success","2000"),t.btnPassword=!1,t.form={password:"",oldPassword:"",confirm:""}})).catch((function(){Object(l.a)(t.$t("Đã có lỗi gì đó xảy ra, Vui lòng thử lại sau"),"error","3000"),t.btnPassword=!1}))})).catch((function(){t.btnPassword=!1,Object(l.a)(t.$t("Mật khẩu cũ không đúng, Vui lòng thử lại"),"error","3000")}));case 6:case"end":return e.stop()}}),e)})))()}}},d=n(18),component=Object(d.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"admin-content"},[r("div",{staticClass:"profile"},[r("div",{staticClass:"profile__avt"},[r("div",{staticClass:"profile__avt-contain"},[t.$store.state.user.avatar?r("img",{attrs:{src:t.$store.state.user.avatar,alt:"avatar"}}):r("img",{attrs:{src:n(416),alt:"avatar"}})]),t._v(" "),r("div",{staticClass:"profile__avt-edit",on:{click:t.openModalAvatar}},[r("icon-camera",{staticClass:"icon"})],1),t._v(" "),r("a-modal",{staticClass:"modal-avatar",attrs:{title:t.$t("Thay đổi ảnh đại diện")},on:{cancel:t.cancelModal},model:{value:t.visibleModal,callback:function(e){t.visibleModal=e},expression:"visibleModal"}},[r("template",{slot:"closeIcon"},[r("icon-close",{staticClass:"icon"})],1),t._v(" "),r("template",{slot:"footer"},[r("a-button",{key:"submit",attrs:{size:"large",type:"primary",loading:t.btnLoading,disabled:t.disableBtnSubmit},on:{click:t.onSubmit}},[t._v("\n            "+t._s(t.$t("Lưu thay đổi"))+"\n          ")])],1),t._v(" "),r("a-upload",{staticClass:"avt-upload avatar-uploader",attrs:{name:"file",accept:".png, .jpg, .jpeg",multiple:!1,"custom-request":t.dummyRequest,"show-upload-list":!1},on:{change:t.handleChooseAvt}},[t.imageUrl?r("img",{staticClass:"view-img",attrs:{src:t.imageUrl,alt:"review avatar"}}):t._e(),t._v(" "),r("a-button",{attrs:{block:"",size:"large"}},[r("a-icon",{attrs:{type:"upload"}}),t._v("\n            "+t._s(t.$t("Tải ảnh lên"))+"\n          ")],1)],1)],2)],1),t._v(" "),r("div",{staticClass:"profile__info"},[r("div",{staticClass:"profile__info-basic"},[r("div",{staticClass:"title"},[r("h2",[t._v(t._s(t.$t("Thông tin")))]),t._v(" "),r("div",{staticClass:"title-right"},[t.showInfo?r("a-button",{attrs:{size:"large"},on:{click:t.handleEdit}},[t._v(t._s(t.$t("Sửa thông tin")))]):t._e(),t._v(" "),t.showInfo?t._e():r("a-button",{staticClass:"btn-cancel",attrs:{size:"large"},on:{click:t.handleCancel}},[t._v(t._s(t.$t("Hủy")))]),t._v(" "),t.showInfo?t._e():r("a-button",{attrs:{loading:t.btnLoading,size:"large"},on:{click:t.onSave}},[t._v(t._s(t.$t("Lưu thay đổi")))])],1)]),t._v(" "),r("div",{staticClass:"info name"},[r("span",[t._v(t._s(t.$t("Tên hiển thị")))]),t._v(" "),t.showInfo?r("p",[t._v(t._s(t.$store.state.user.displayName))]):r("a-input",{attrs:{size:"large"},model:{value:t.displayName,callback:function(e){t.displayName=e},expression:"displayName"}})],1),t._v(" "),r("div",{staticClass:"info email"},[r("span",[t._v("Email")]),t._v(" "),r("p",[t._v(t._s(t.$store.state.user.email))])]),t._v(" "),r("div",{staticClass:"info date-create"},[r("span",[t._v(t._s(t.$t("Ngày tạo")))]),t._v(" "),r("p",{staticClass:"text-cap"},[t._v(t._s(t.formatDate(t.$store.state.user.createAt)))])]),t._v(" "),r("div",{staticClass:"info last-login"},[r("span",[t._v(t._s(t.$t("Lần đăng nhập cuối")))]),t._v(" "),r("p",{staticClass:"text-cap"},[t._v(t._s(t.formatDate(t.$store.state.user.lastLogin)))])])]),t._v(" "),r("div",{staticClass:"profile__info-pass"},[r("div",{staticClass:"title"},[r("h2",[t._v(t._s(t.$t("Đổi mật khẩu")))])]),t._v(" "),r("a-form-model",{ref:"ruleForm",attrs:{rules:t.rules,model:t.form,"label-align":"left"}},[r("a-form-model-item",{ref:"oldPassword",attrs:{prop:"oldPassword",label:t.$t("Mật khẩu cũ")}},[r("a-input-password",{attrs:{size:"large"},model:{value:t.form.oldPassword,callback:function(e){t.$set(t.form,"oldPassword",e)},expression:"form.oldPassword"}})],1),t._v(" "),r("a-form-model-item",{ref:"password",attrs:{prop:"password",label:t.$t("Mật khẩu mới")}},[r("a-input-password",{attrs:{size:"large"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),r("a-form-model-item",{ref:"confirm",attrs:{prop:"confirm","has-feedback":"",label:t.$t("Xác nhận mật khẩu mới")}},[r("a-input-password",{attrs:{name:"confim",size:"large"},model:{value:t.form.confirm,callback:function(e){t.$set(t.form,"confirm",e)},expression:"form.confirm"}})],1),t._v(" "),r("a-form-model-item",[r("a-button",{attrs:{size:"large",loading:t.btnPassword},on:{click:t.validateForm}},[t._v(t._s(t.$t("Thay đổi mật khẩu")))])],1)],1)],1)])])])}),[],!1,null,null,null);e.default=component.exports}}]);