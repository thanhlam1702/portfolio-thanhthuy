(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{695:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(4),o=function(t,e,n){r.a.prototype.$swal({position:"top-end",title:t,icon:e,timer:n,showConfirmButton:!1,toast:!0})}},832:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(693),o=n.n(r);o.a.locale("vi");var l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dddd DD/MM/YYYY, HH:mm:ss";return o()(t).format(e)}},835:function(t,e,n){var map={"./af":696,"./af.js":696,"./ar":697,"./ar-dz":698,"./ar-dz.js":698,"./ar-kw":699,"./ar-kw.js":699,"./ar-ly":700,"./ar-ly.js":700,"./ar-ma":701,"./ar-ma.js":701,"./ar-sa":702,"./ar-sa.js":702,"./ar-tn":703,"./ar-tn.js":703,"./ar.js":697,"./az":704,"./az.js":704,"./be":705,"./be.js":705,"./bg":706,"./bg.js":706,"./bm":707,"./bm.js":707,"./bn":708,"./bn-bd":709,"./bn-bd.js":709,"./bn.js":708,"./bo":710,"./bo.js":710,"./br":711,"./br.js":711,"./bs":712,"./bs.js":712,"./ca":713,"./ca.js":713,"./cs":714,"./cs.js":714,"./cv":715,"./cv.js":715,"./cy":716,"./cy.js":716,"./da":717,"./da.js":717,"./de":718,"./de-at":719,"./de-at.js":719,"./de-ch":720,"./de-ch.js":720,"./de.js":718,"./dv":721,"./dv.js":721,"./el":722,"./el.js":722,"./en-au":723,"./en-au.js":723,"./en-ca":724,"./en-ca.js":724,"./en-gb":725,"./en-gb.js":725,"./en-ie":726,"./en-ie.js":726,"./en-il":727,"./en-il.js":727,"./en-in":728,"./en-in.js":728,"./en-nz":729,"./en-nz.js":729,"./en-sg":730,"./en-sg.js":730,"./eo":731,"./eo.js":731,"./es":732,"./es-do":733,"./es-do.js":733,"./es-mx":734,"./es-mx.js":734,"./es-us":735,"./es-us.js":735,"./es.js":732,"./et":736,"./et.js":736,"./eu":737,"./eu.js":737,"./fa":738,"./fa.js":738,"./fi":739,"./fi.js":739,"./fil":740,"./fil.js":740,"./fo":741,"./fo.js":741,"./fr":742,"./fr-ca":743,"./fr-ca.js":743,"./fr-ch":744,"./fr-ch.js":744,"./fr.js":742,"./fy":745,"./fy.js":745,"./ga":746,"./ga.js":746,"./gd":747,"./gd.js":747,"./gl":748,"./gl.js":748,"./gom-deva":749,"./gom-deva.js":749,"./gom-latn":750,"./gom-latn.js":750,"./gu":751,"./gu.js":751,"./he":752,"./he.js":752,"./hi":753,"./hi.js":753,"./hr":754,"./hr.js":754,"./hu":755,"./hu.js":755,"./hy-am":756,"./hy-am.js":756,"./id":757,"./id.js":757,"./is":758,"./is.js":758,"./it":759,"./it-ch":760,"./it-ch.js":760,"./it.js":759,"./ja":761,"./ja.js":761,"./jv":762,"./jv.js":762,"./ka":763,"./ka.js":763,"./kk":764,"./kk.js":764,"./km":765,"./km.js":765,"./kn":766,"./kn.js":766,"./ko":767,"./ko.js":767,"./ku":768,"./ku.js":768,"./ky":769,"./ky.js":769,"./lb":770,"./lb.js":770,"./lo":771,"./lo.js":771,"./lt":772,"./lt.js":772,"./lv":773,"./lv.js":773,"./me":774,"./me.js":774,"./mi":775,"./mi.js":775,"./mk":776,"./mk.js":776,"./ml":777,"./ml.js":777,"./mn":778,"./mn.js":778,"./mr":779,"./mr.js":779,"./ms":780,"./ms-my":781,"./ms-my.js":781,"./ms.js":780,"./mt":782,"./mt.js":782,"./my":783,"./my.js":783,"./nb":784,"./nb.js":784,"./ne":785,"./ne.js":785,"./nl":786,"./nl-be":787,"./nl-be.js":787,"./nl.js":786,"./nn":788,"./nn.js":788,"./oc-lnc":789,"./oc-lnc.js":789,"./pa-in":790,"./pa-in.js":790,"./pl":791,"./pl.js":791,"./pt":792,"./pt-br":793,"./pt-br.js":793,"./pt.js":792,"./ro":794,"./ro.js":794,"./ru":795,"./ru.js":795,"./sd":796,"./sd.js":796,"./se":797,"./se.js":797,"./si":798,"./si.js":798,"./sk":799,"./sk.js":799,"./sl":800,"./sl.js":800,"./sq":801,"./sq.js":801,"./sr":802,"./sr-cyrl":803,"./sr-cyrl.js":803,"./sr.js":802,"./ss":804,"./ss.js":804,"./sv":805,"./sv.js":805,"./sw":806,"./sw.js":806,"./ta":807,"./ta.js":807,"./te":808,"./te.js":808,"./tet":809,"./tet.js":809,"./tg":810,"./tg.js":810,"./th":811,"./th.js":811,"./tk":812,"./tk.js":812,"./tl-ph":813,"./tl-ph.js":813,"./tlh":814,"./tlh.js":814,"./tr":815,"./tr.js":815,"./tzl":816,"./tzl.js":816,"./tzm":817,"./tzm-latn":818,"./tzm-latn.js":818,"./tzm.js":817,"./ug-cn":819,"./ug-cn.js":819,"./uk":820,"./uk.js":820,"./ur":821,"./ur.js":821,"./uz":822,"./uz-latn":823,"./uz-latn.js":823,"./uz.js":822,"./vi":824,"./vi.js":824,"./x-pseudo":825,"./x-pseudo.js":825,"./yo":826,"./yo.js":826,"./zh-cn":827,"./zh-cn.js":827,"./zh-hk":828,"./zh-hk.js":828,"./zh-mo":829,"./zh-mo.js":829,"./zh-tw":830,"./zh-tw.js":830};function r(t){var e=o(t);return n(e)}function o(t){if(!n.o(map,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return map[t]}r.keys=function(){return Object.keys(map)},r.resolve=o,t.exports=r,r.id=835},904:function(t,e,n){"use strict";n.r(e);n(28),n(77),n(78),n(161),n(409),n(42);var r=n(17),o=n(832),l=n(695),c={layout:"admin",data:function(){var t=this;return{btnPassword:!1,showInfo:!0,displayName:"",visibleModal:!1,disableBtnSubmit:!0,btnLoading:!1,seclectedFile:"",imageUrl:"",form:{password:"",oldPassword:"",confirm:""},rules:{oldPassword:{required:!0,message:this.$t("Vui lòng nhập mật khẩu cũ!")},password:{required:!0,message:this.$t("Vui lòng nhập mật khẩu")},confirm:[{validator:function(e,n,r){n!==t.form.password?r(new Error(t.$t("Mật khẩu không trùng khớp!"))):r()},trigger:"change"},{required:!0,message:this.$t("Vui lòng nhập lại mật khẩu!")}]}}},head:function(){return{title:this.$t("Trang cá nhân")+" | Thanh Thúy"}},methods:{formatDate:function(t){return Object(o.a)(parseInt(t))},openModalAvatar:function(){this.visibleModal=!0},cancelModal:function(){var t=this;setTimeout((function(){t.imageUrl=""}),200),this.visibleModal=!1,this.disableBtnSubmit=!0},dummyRequest:function(t){setTimeout((function(){t.onSuccess("ok")}),0)},handleChooseAvt:function(t){"done"===t.file.status&&(this.disableBtnSubmit=!1,this.seclectedFile=t.file.originFileObj,this.imageUrl=URL.createObjectURL(t.file.originFileObj))},onSubmit:function(){var t=this,e=this.$fire.auth.currentUser;this.btnLoading=!0,this.$fire.storage.ref("user/avatar-"+e.uid).put(this.seclectedFile).then((function(n){n.ref.getDownloadURL().then((function(n){e.updateProfile({photoURL:n}).then((function(e){t.cancelModal(),t.$store.dispatch("fetchUser"),t.btnLoading=!1,Object(l.a)(t.$t("Thay đổi thành công"),"success","2000")})).catch((function(){t.btnLoading=!1,Object(l.a)(t.$t("Thay đổi thất bại, Vui lòng thử lại sau"),"error","3000")}))}))}))},handleEdit:function(){this.showInfo=!1,this.displayName=this.$store.state.user.displayName,this.phoneNumber=this.$store.state.user.phoneNumber},handleCancel:function(){this.showInfo=!0,this.displayName="",this.phoneNumber=""},onSave:function(){var t=this;this.btnLoading=!0,this.$fire.auth.currentUser.updateProfile({displayName:this.displayName}).then((function(e){t.handleCancel(),t.$store.dispatch("fetchUser"),t.btnLoading=!1,Object(l.a)(t.$t("Thay đổi thành công"),"success","2000")})).catch((function(){t.btnLoading=!1,Object(l.a)(t.$t("Thay đổi thất bại, Vui lòng thử lại sau"),"error","3000")}))},validateForm:function(){var t=this;this.$refs.ruleForm.validate((function(e){e&&t.onChangePass()}))},onChangePass:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.btnPassword=!0,n=t.$fire.auth.currentUser,e.next=4,t.$fireModule.auth.EmailAuthProvider.credential(n.email,t.form.oldPassword);case 4:r=e.sent,n.reauthenticateWithCredential(r).then((function(e){n.updatePassword(t.form.password).then((function(){Object(l.a)(t.$t("Thay đổi thành công"),"success","2000"),t.btnPassword=!1,t.form={password:"",oldPassword:"",confirm:""}})).catch((function(){Object(l.a)(t.$t("Đã có lỗi gì đó xảy ra, Vui lòng thử lại sau"),"error","3000"),t.btnPassword=!1}))})).catch((function(){t.btnPassword=!1,Object(l.a)(t.$t("Mật khẩu cũ không đúng, Vui lòng thử lại"),"error","3000")}));case 6:case"end":return e.stop()}}),e)})))()}}},d=n(19),component=Object(d.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"admin-content"},[r("div",{staticClass:"profile"},[r("div",{staticClass:"profile__avt"},[r("div",{staticClass:"profile__avt-contain"},[t.$store.state.user.avatar?r("img",{attrs:{src:t.$store.state.user.avatar,alt:"avatar"}}):r("img",{attrs:{src:n(410),alt:"avatar"}})]),t._v(" "),r("div",{staticClass:"profile__avt-edit",on:{click:t.openModalAvatar}},[r("icon-camera",{staticClass:"icon"})],1),t._v(" "),r("a-modal",{staticClass:"modal-avatar",attrs:{title:t.$t("Thay đổi ảnh đại diện")},on:{cancel:t.cancelModal},model:{value:t.visibleModal,callback:function(e){t.visibleModal=e},expression:"visibleModal"}},[r("template",{slot:"closeIcon"},[r("icon-close",{staticClass:"icon"})],1),t._v(" "),r("template",{slot:"footer"},[r("a-button",{key:"submit",attrs:{size:"large",type:"primary",loading:t.btnLoading,disabled:t.disableBtnSubmit},on:{click:t.onSubmit}},[t._v("\n            "+t._s(t.$t("Lưu thay đổi"))+"\n          ")])],1),t._v(" "),r("a-upload",{staticClass:"avt-upload avatar-uploader",attrs:{name:"file",accept:".png, .jpg, .jpeg",multiple:!1,"custom-request":t.dummyRequest,"show-upload-list":!1},on:{change:t.handleChooseAvt}},[t.imageUrl?r("img",{staticClass:"view-img",attrs:{src:t.imageUrl,alt:"review avatar"}}):t._e(),t._v(" "),r("a-button",{attrs:{block:"",size:"large"}},[r("a-icon",{attrs:{type:"upload"}}),t._v("\n            "+t._s(t.$t("Tải ảnh lên"))+"\n          ")],1)],1)],2)],1),t._v(" "),r("div",{staticClass:"profile__info"},[r("div",{staticClass:"profile__info-basic"},[r("div",{staticClass:"title"},[r("h2",[t._v(t._s(t.$t("Thông tin")))]),t._v(" "),r("div",{staticClass:"title-right"},[t.showInfo?r("a-button",{attrs:{size:"large"},on:{click:t.handleEdit}},[t._v(t._s(t.$t("Sửa thông tin")))]):t._e(),t._v(" "),t.showInfo?t._e():r("a-button",{staticClass:"btn-cancel",attrs:{size:"large"},on:{click:t.handleCancel}},[t._v(t._s(t.$t("Hủy")))]),t._v(" "),t.showInfo?t._e():r("a-button",{attrs:{loading:t.btnLoading,size:"large"},on:{click:t.onSave}},[t._v(t._s(t.$t("Lưu thay đổi")))])],1)]),t._v(" "),r("div",{staticClass:"info name"},[r("span",[t._v(t._s(t.$t("Tên hiển thị")))]),t._v(" "),t.showInfo?r("p",[t._v(t._s(t.$store.state.user.displayName))]):r("a-input",{attrs:{size:"large"},model:{value:t.displayName,callback:function(e){t.displayName=e},expression:"displayName"}})],1),t._v(" "),r("div",{staticClass:"info email"},[r("span",[t._v("Email")]),t._v(" "),r("p",[t._v(t._s(t.$store.state.user.email))])]),t._v(" "),r("div",{staticClass:"info date-create"},[r("span",[t._v(t._s(t.$t("Ngày tạo")))]),t._v(" "),r("p",{staticClass:"text-cap"},[t._v(t._s(t.formatDate(t.$store.state.user.createAt)))])]),t._v(" "),r("div",{staticClass:"info last-login"},[r("span",[t._v(t._s(t.$t("Lần đăng nhập cuối")))]),t._v(" "),r("p",{staticClass:"text-cap"},[t._v(t._s(t.formatDate(t.$store.state.user.lastLogin)))])])]),t._v(" "),r("div",{staticClass:"profile__info-pass"},[r("div",{staticClass:"title"},[r("h2",[t._v(t._s(t.$t("Đổi mật khẩu")))])]),t._v(" "),r("a-form-model",{ref:"ruleForm",attrs:{rules:t.rules,model:t.form,"label-align":"left"}},[r("a-form-model-item",{ref:"oldPassword",attrs:{prop:"oldPassword",label:t.$t("Mật khẩu cũ")}},[r("a-input-password",{attrs:{size:"large"},model:{value:t.form.oldPassword,callback:function(e){t.$set(t.form,"oldPassword",e)},expression:"form.oldPassword"}})],1),t._v(" "),r("a-form-model-item",{ref:"password",attrs:{prop:"password",label:t.$t("Mật khẩu mới")}},[r("a-input-password",{attrs:{size:"large"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),r("a-form-model-item",{ref:"confirm",attrs:{prop:"confirm","has-feedback":"",label:t.$t("Xác nhận mật khẩu mới")}},[r("a-input-password",{attrs:{name:"confim",size:"large"},model:{value:t.form.confirm,callback:function(e){t.$set(t.form,"confirm",e)},expression:"form.confirm"}})],1),t._v(" "),r("a-form-model-item",[r("a-button",{attrs:{size:"large",loading:t.btnPassword},on:{click:t.validateForm}},[t._v(t._s(t.$t("Thay đổi mật khẩu")))])],1)],1)],1)])])])}),[],!1,null,null,null);e.default=component.exports}}]);